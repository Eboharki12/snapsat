{% extends "base.jinja2" %}

{% block header %}
<header class='p2'>
    <h1 class='mbn'><a href='/'>Snapsat</a> <span class='h3 red'>Beta</span></h1>
    <p class='blurb mbl'>The easiest way to create custom Landsat band composites.</p>
</header>
{% endblock %}

{% block content %}

<div class='p2'>
    <h2>Scene {{ scene_id }}</h2>

        {% for band_combo, composite in composites.iteritems() %}

            <p>Bands: {{ composite.band1 }}, {{ composite.band2 }}, {{ composite.band3 }}</p>

            <div class='flex flex-wrap mxn2'>
                {% if composite.previewurl %}
                <div class='flex'>
                    <img src="{{ composite.previewurl }}">
                </div>
                {% else %}
                <div class='flex'>
                    <img src="/static/img/no_preview.png">
                </div>
                {% endif %}
            </div>

            {% if composite.fullurl %}
            <p>Current status: <strong class='red'><a href="{{ composite.fullurl }}">{{ composite.fullstatus }}! Download Full Zip</a></strong></p>
            {% else %}
                {% if composite.fullstatus %}
                    <p>Current status: <strong class='red'>{{ composite.fullstatus }}</strong></p>
                    {% if composite.elapsed_time %}
                        <p>Elapsed Process Time (hr:min:sec): {{ composite.elapsed_time }}</p>
                    {% endif %}
                {% else %}
                <p>Current status: <strong class='red'>No one has requested the full composite of this band combination. Be the first!</strong></p>
                {% endif %}

            {% endif %}
        {% endfor %}


    <h2>Choose a combination</h2>

    <form method="post" id="request_form_{{scene_id}}">
        <div id='combinations'>
            <select name='band1'>
                <option value='1'>1</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5</option>
                <option value='6'>6</option>
                <option value='7'>7</option>
                <option value='8'>8</option>
            </select>
            <select name='band2'>
                <option value='1'>1</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5</option>
                <option value='6'>6</option>
                <option value='7'>7</option>
                <option value='8'>8</option>
            </select>
            <select name='band3'>
                <option value='1'>1</option>
                <option value='2'>2</option>
                <option value='3'>3</option>
                <option value='4'>4</option>
                <option value='5'>5</option>
                <option value='6'>6</option>
                <option value='7'>7</option>
                <option value='8'>8</option>
            </select>


        </div>

        <div class='inline-block clearfix'>
            <button form="request_form_{{scene_id}}" formaction="/request_preview/{{scene_id}}" formmethod="post" type="submit" class="left button rounded-left">Render Preview</button>
            <button form="request_form_{{scene_id}}" formaction="/request_composite/{{scene_id}}" formmethod="post" type="submit" class="left button rounded-right">Render Full Image</button>
        </div>
    </form>

</div>

</div>


{% endblock %}
