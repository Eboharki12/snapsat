{% extends "base.jinja2" %}

{% block header %}
<header class='contain'>
    <h1 class='mbn'><a href='/'>Snapsat</a> <span class='h3 red'>Beta</span></h1>
    <p class='blurb mbl'>The easiest way to create custom Landsat band composites.</p>
</header>
{% endblock %}

{% block content %}

<h2>Scene {{ scene_id }}</h2>
{% for band_combo, composite in composites.iteritems() %}
        <p>Bands: {{ composite.band1 }}, {{ composite.band2 }}, {{ composite.band3 }}</p>
        {% if composite.previewurl %}
            <img src="{{ composite.previewurl }}">
        {% else %}
            <img src="/static/img/no_preview.png">
        {% endif %}
        {% if composite.compositeurl %}
            <a href="{{ composite.compositeurl }}">Download Full Zip</a>
        {% else %}
            {% if composite.compositestatus %}
                 <p>Current status: <strong class='red'>{{ composite.compositestatus }}</strong></p>
                {% if composite.elapsed_time %}
                    <p>Elapsed Process Time (hr:min:sec): {{ composite.elapsed_time }}</p>
                {% endif %}
            {% else %}
                <p>Current status: <strong class='red'>No one has requested the full composite of this band combination. Be the first!</strong></p>
            {% endif %}
        {% endif %}
{% endfor %}

<!-- <div id='rendered_composites' class='display-inline-block'>
    {% if rendered_composites %}
        <h2>Rendered composites for {{ scene_id }}</h2>
        {% for composite in rendered_composites %}
            <p>Bands: {{ composite.band1 }}, {{ composite.band2 }}, {{ composite.band3 }}</p>
            {% if composite.previewurl %}
                <img src="{{ composite.previewurl }}">
            {% endif %}
            {% if composite.renderurl %}
                <a href="{{ composite.renderurl }}">Download Full Zip</a>
            {% endif %}
        {% endfor %}
    {% endif %}
</div>

<div id='rendering_composites' class='display-inline-block'>
    {% if rendering_composites %}
        {% for composite in rendering_composites %}
            <p>Bands: {{ composite.band1 }}, {{ composite.band2 }}, {{ composite.band3 }}</p>
            <p>Current status: <strong class='red'>{{ composite.status }}</strong></p>
            {% if composite.elapsed_worker_time %}
                <p>Elapsed Process Time (hr:min:sec): {{ composite.elapsedtime }}</p>
            {% endif %}
        {% endfor %}
    {% endif %}
</div> -->
    




    <h2>Choose a combination</h2>

    <form method="post" id="request_form_{{scene_id}}">
        <div id='combinations'>
            <div class='display-block'>
                <label>Natural color: 4, 3, 2</label>
                <input class='' type="radio" name="band_combo" value="432" checked>
            </div>
            <div class='display-block'>
                <label>Color infrared: 5, 4, 3</label>
                <input type="radio" name="band_combo" value="543">
            </div>
            <div class='display-block'>
                <label>5, 3, 2</label>
                <input type="radio" name="band_combo" value="532">
            </div>
        </div>
        <button form="request_form_{{scene_id}}" formaction="/request_preview/{{scene_id}}" formmethod="post" type="submit">Render Preview</button>
        <button form="request_form_{{scene_id}}" formaction="/request_composite/{{scene_id}}" formmethod="post" type="submit">Render Full Image</button>
    </form>

</div>

</div>

{% endblock %}
